<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Calculate peptide reconstitution with BAC water and create printable labels">
    <meta name="author" content="PeppinLePew">
    <meta name="theme-color" content="#4a90e2">
    
    <!-- Open Graph / Facebook / LinkedIn -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://peppinlepew.github.io/peptide-calculator/">
    <meta property="og:title" content="Peptide Reconstitution Calculator">
    <meta property="og:description" content="Calculate peptide reconstitution with BAC water and create printable labels with QR and Data Matrix codes">
    <meta property="og:image" content="https://peppinlepew.github.io/peptide-calculator/favicon.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Peptide Calculator Logo">
    <meta property="og:image:type" content="image/png">
    <meta property="fb:app_id" content="peptide-calculator">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://peppinlepew.github.io/peptide-calculator/">
    <meta property="twitter:title" content="Peptide Reconstitution Calculator">
    <meta property="twitter:description" content="Calculate peptide reconstitution with BAC water and create printable labels with QR and Data Matrix codes">
    <meta property="twitter:image" content="https://peppinlepew.github.io/peptide-calculator/favicon.png">
    
    <!-- Favicon -->
    <link rel="icon" href="favicon.ico">
    <link rel="apple-touch-icon" href="favicon.png">
    
    <title>Péppin' Lê Pew - Peptide Reconstitution Calculator</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="canonical" href="https://github.io/YOUR_USERNAME/peptide-calculator/">
    <script src="https://cdn.jsdelivr.net/npm/bwip-js@3.4.0/dist/bwip-js-min.js"></script>
</head>
<body>
    <div class="container">
        <div class="logo-container" style="text-align: center; margin-bottom: 20px;">
            <img src="favicon.png" alt="Péppin' Lê Pew Logo" width="100" style="border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.2);">
        </div>
        <h1>Péppin' Lê Pew</h1>
        <h2 style="text-align: center; margin-top: -1rem; margin-bottom: 1.5rem; color: #666; font-size: 1.2rem;">The Ultimate Peptide Reconstitution Calculator</h2>
        <div class="motivation-note">
            <p>This calculator simplifies peptide reconstitution by determining the precise amount of BAC water needed to achieve clean, round numbers of units per dose. No more mental math or imprecise measurements!</p>
        </div>
        <div class="calculator-card">
            <div class="input-group" style="display: flex; gap: 1rem; flex-wrap: wrap;">
                <div style="flex: 2; min-width: 200px;">
                    <label for="vialQuantitySelect">Quantity of Peptide in Vial (mg)</label>
                    <div class="input-wrapper">
                        <select id="vialQuantitySelect"></select>
                        <input type="number" id="vialQuantityCustom" min="0" step="0.1" placeholder="Enter custom quantity" style="display:none;">
                        <span class="unit">mg</span>
                    </div>
                </div>
                <div style="flex: 1; min-width: 200px;">
                    <label for="numVialsSelect">Number of Vials</label>
                    <div class="input-wrapper">
                        <select id="numVialsSelect"></select>
                        <input type="number" id="numVialsCustom" min="1" step="1" placeholder="Enter custom number" style="display:none;">
                        <span class="unit">vials</span>
                    </div>
                </div>
            </div>
            <div class="input-group">
                <label for="doseSelect">Peptide Dose (mg)</label>
                <div class="input-wrapper">
                    <select id="doseSelect"></select>
                    <input type="number" id="doseCustom" min="0" step="0.1" placeholder="Enter custom dose" style="display:none;">
                    <span class="unit">mg</span>
                </div>
            </div>
            <div class="input-group">
                <label for="concentrationSelect">Concentration</label>
                <div class="input-wrapper">
                    <select id="concentrationSelect"></select>
                    <input type="number" id="concentrationCustom" min="0" step="0.1" placeholder="Enter custom concentration" style="display:none;">
                    <span class="unit">mg/ml</span>
                </div>
                <span class="field-warning" id="concentrationWarning" style="display:none; color: #dc3545; font-size: 0.9em; margin-top: 0.25rem;"></span>
            </div>
            <div class="input-group">
                <label for="unitsSelect">Units per Dose</label>
                <div class="input-wrapper">
                    <select id="unitsSelect"></select>
                    <input type="number" id="unitsCustom" min="0" step="0.1" placeholder="Enter custom units" style="display:none;">
                    <span class="unit">units</span>
                </div>
                <span class="field-warning" id="unitsWarning" style="display:none; color: #dc3545; font-size: 0.9em; margin-top: 0.25rem;"></span>
            </div>
            <div class="input-group" style="display: flex; gap: 1rem; flex-wrap: wrap;">
                <div style="flex: 1; min-width: 200px;">
                    <label for="bacWaterPerVialInput">BAC Water per Vial</label>
                    <div class="input-wrapper">
                        <input type="number" id="bacWaterPerVialInput" min="0" step="0.1" readonly>
                        <span class="unit">ml</span>
                    </div>
                </div>
                <div style="flex: 1; min-width: 200px;">
                    <label for="bacWaterTotalInput">BAC Water Total</label>
                    <div class="input-wrapper">
                        <input type="number" id="bacWaterTotalInput" min="0" step="0.1" readonly>
                        <span class="unit">ml</span>
                    </div>
                </div>
                <span class="field-warning" id="bacWaterWarning" style="display:none; color: #dc3545; font-size: 0.9em; margin-top: 0.25rem; width: 100%;"></span>
            </div>
            <div class="input-group" style="display: flex; gap: 1rem; flex-wrap: wrap;">
                <div style="flex: 1; min-width: 200px;">
                    <label for="dosesPerLyophilizedVialInput">Doses per Lyophilized Vial</label>
                    <div class="input-wrapper">
                        <input type="number" id="dosesPerLyophilizedVialInput" min="0" step="0.1" readonly>
                        <span class="unit">doses</span>
                    </div>
                </div>
                <div style="flex: 1; min-width: 200px;">
                    <label for="dosesPerFinalVialInput">Doses per Final Vial/cartridge</label>
                    <div class="input-wrapper">
                        <input type="number" id="dosesPerFinalVialInput" min="0" step="0.1" readonly>
                        <span class="unit">doses</span>
                    </div>
                </div>
            </div>
            <p id="warningMessage" class="warning-message" style="display:none;">Warning: Calculated concentration exceeds the recommended maximum threshold.</p>
        </div>

        <div class="calculator-card">
            <h2>Reconstitution Instructions</h2>
            <div class="instructions-content" style="padding: 1rem; background-color: #f8f9fa; border-radius: 8px;">
                <div style="margin-bottom: 1rem; padding: 1rem; background-color: #e9ecef; border-radius: 4px;">
                    <strong>Summary:</strong>
                    <ul style="margin: 0.5rem 0 0 0;">
                        <li>Number of vials: <span id="numVialsDisplay">X</span></li>
                        <li>Peptide per vial: <span id="peptidePerVialDisplay">X</span>mg</li>
                        <li>Total BAC Water: <span id="bacWaterTotalDisplay">X</span>ml</li>
                        <li>Final Concentration: <span id="finalConcentrationDisplay">X</span>mg/ml</li>
                        <li>Total peptide in final cartridge: <span id="totalPeptideDisplay">X</span>mg</li>
                    </ul>
                </div>
                <p style="margin: 0 0 1rem 0;">Using your normal reconstitution routine:</p>
                <ol style="margin: 0; padding-left: 1.5rem;">
                    <li>Withdraw <span id="bacWaterAmount">X</span>ml of BAC water into one syringe</li>
                    <li>Inject <span id="bacWaterPerVialDisplay">X</span>ml into <span id="vialText">each vial</span> of lyophilized peptide</li>
                    <li>Gently swirl (do not shake) until fully dissolved (let stand for 30 minutes)</li>
                    <li>Transfer the reconstituted peptide through a sterile filter into your final container</li>
                    <li>Store in refrigerator</li>
                </ol>
            </div>
        </div>

        <div class="calculator-card">
            <h2>Label Generator</h2>
            <div class="input-group">
                <label for="labelInput">Label</label>
                <input type="text" id="labelInput" placeholder="eg. JHT T-30" style="width: 100%;">
            </div>
            <div class="input-group">
                <label for="dateInput">Date</label>
                <input type="date" id="dateInput">
            </div>
            <div class="input-group">
                <label for="urlInput">URL for the COA</label>
                <input type="url" id="urlInput" placeholder="eg. results URL" style="width: 100%;">
                <div id="shortenedUrlDisplay" class="shortened-url"></div>
                <div style="font-size: 0.9em; color: #666; margin-top: 0.5rem;">
                    <em>Tip: Using a shortened URL creates a simpler QR code that's easier to print clearly on small labels.</em>
                </div>
            </div>
            
            <!-- Canvas for Data Matrix code generation (hidden) -->
            <canvas id="dataMatrixCanvas" style="display:none;"></canvas>
            
            <div id="labels-container">
                <h3>Labels (Click to Open)</h3>
                <h4>Reconstituted Vials</h4>
                <div class="labels-grid">
                    <div class="label-container qr-label">
                        <h4>QR Code</h4>
                    </div>
                    <div class="label-container datamatrix-label">
                        <h4>Data Matrix</h4>
                    </div>
                </div>
                
                <h4 style="margin-top: 2rem;">Un-reconstituted Vials</h4>
                <div class="labels-grid">
                    <div class="label-container unrecon-qr-label">
                        <h4>QR Code</h4>
                    </div>
                    <div class="label-container unrecon-datamatrix-label">
                        <h4>Data Matrix</h4>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="script.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <h3>Contribute</h3>
                <p>This calculator is an open source project. Have ideas for improvements or new features?</p>
                <ul>
                    <li>Dynamic thresholds for concentration warnings</li>
                    <li>Support for more label sizes and templates</li>
                    <li>Additional calculation methods for peptides</li>
                </ul>
                <p>View the project on <a href="https://github.com/peppinlepew/peptide-calc" target="_blank">GitHub</a> to contribute or suggest changes.</p>
                
                <div class="privacy-note" style="margin-top: 2rem; padding-top: 1rem; border-top: 1px solid #eee; font-size: 0.9rem; color: #666;">
                    <h4>Privacy Note</h4>
                    <p>This application stores your calculator settings in your browser's local storage so they can be restored when you return. This data never leaves your device, is never shared with any server, and cannot be used for tracking or analytics. You can clear this data at any time by clearing your browser's local storage or history.</p>
                    <button id="resetSettingsButton" style="margin-top: 1rem; padding: 0.5rem 1rem; background-color: #dc3545; color: white; border: none; border-radius: 4px; cursor: pointer; font-weight: bold;">Reset All Settings</button>
                </div>
            </div>
        </div>
    </footer>
</body>
</html>
